# scripts/run.do

if {![info exists TEST]} { set TEST "sanity_rw_test" }
if {![info exists VERB]} { set VERB "UVM_MEDIUM" }

# Start sim
vsim -uvmcontrol=all -coverage -voptargs=+acc work.top_tb \
  +UVM_TESTNAME=$TEST +UVM_VERBOSITY=$VERB

# -----------------------------
# Wave setup
# -----------------------------
# Create wave window if not present
view wave

# Add everything in top_tb (easy + reliable)
add wave -r sim:/top_tb/*

# Add interface signals nicely
# NOTE: this path must match your interface instance name
# If your instance isn't axi_vif, change it here!
add wave -r sim:/top_tb/axi_vif/*

# Add DUT internal signals (optional, if you want deeper debug)
add wave -r sim:/top_tb/dut/*

# Format wave window (optional)
TreeUpdate [SetDefaultTree]
configure wave -signalnamewidth 1
configure wave -namecolwidth 250
configure wave -valuecolwidth 120

# Run
run -all

# Optional: keep GUI open at end
# quit -sim

